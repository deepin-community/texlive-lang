<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <title>jlreq</title>
  <style>
    .markdown-body {
      padding-top: 10px;
      padding-bottom: 10px;
      background-color: white;
      padding: 30px;
      line-height: 170%;
    }
    h1{
      font-size: 200%;
    }
    h2{
      border-style: solid;
      border-width: 0 0 0.1em 0em;
      padding: 0 0 0.2em 0em;
      border-color: #EEEEEE;
      margin-top: 2em;
    }
    h3{
      border-style: solid;
      border-width: 0 0 0 0.5em;
      padding: 0 0 0 0.5em;
      border-color: #EEEEEE;
      margin-top: 2em;
    }
    code{
      white-space: pre;
      font-weight: normal;
      background-color: #F4F4F4;
      border-color: #F4F4F4;
      border-style: solid;
      border-width: .2em .5em;
      border-radius: .2em;
    }
    pre{
      background-color: #F8F8F8;
      border-color: #F8F8F8;
      border-width: 1em;
      border-style: solid;
      border-radius: .5em;
      padding: 0;
      margin: 0;
      line-height: 130%;
    }
    pre code{
      background-color: #F8F8F8;
      border-style: none;
    }
  </style>
</head>
<body>
<article class="markdown-body">
<h1 id="jlreq">jlreq</h1>
<h2 id="what-is-this">What is this?</h2>
<p>This package provides the class file and JFM (Japanese font metric)
files for LuaTeX-ja / pLaTeX / upLaTeX. This aims to implement <a
href="https://www.w3.org/TR/jlreq/?lang=en">Requirements for Japanese
Text Layout</a>.</p>
<h2 id="installation">Installation</h2>
<p>Run <code>make</code> to generate JFM files. Move the files as
follows:</p>
<ul>
<li>*.tfm -&gt; $TEXMF/fonts/tfm/public/jlreq</li>
<li>*.vf -&gt; $TEXMF/fonts/vf/public/jlreq</li>
<li>jfm-jlreq.lua, jfm-jlreqv.lua, jfm-jlreq-jidori.lua
jfm-jlreqv-jidori.lua -&gt; $TEXMF/tex/luatex/jlreq</li>
<li>jlreq.cls, jlreq-helpers.sty -&gt; $TEXMF/tex/latex/jlreq</li>
</ul>
<p>The other way to install is just to run <code>make install</code>. It
will install all files in <code>$TEXMFHOME</code>.</p>
<h2 id="usage">Usage</h2>
<p>See <a href="jlreq-ja.html">jlreq-ja.html</a> (in Japanese).</p>
<h2 id="license">LICENSE</h2>
<p>This package is distributed under the BSD 2-Clause License. See <a
href="LICENSE">LICENSE</a>.</p>
<h2 id="changelog">CHANGELOG</h2>
<ul>
<li>2017-02-08
<ul>
<li>First release.</li>
</ul></li>
<li>2017-02-17
<ul>
<li>Fixed bugs.</li>
<li>Implement <code>abstract</code> environment.</li>
<li>Changed/Added some keys to class
option/<code>\jlreqsetup</code></li>
<li>Stopped to load <code>pxrubirica</code>, <code>luatexja-ruby</code>
and <code>nidanfloat</code>.</li>
</ul></li>
<li>2017-03-14
<ul>
<li>Fixed bugs.</li>
<li><code>\sffamily</code> etc. also change the Japanese font
family.</li>
<li>Added many options to <code>\DeclareBlockHeading</code>.</li>
<li>Some options related to <code>quote</code> environment etc.</li>
</ul></li>
<li>2017-03-20
<ul>
<li>Fixed bugs.</li>
<li>Insert some spaces around
<code>\footnote / \sidenote / \endnote</code>.</li>
</ul></li>
<li>2017-04-04
<ul>
<li>Fixed a bug.</li>
<li>Added options <code>tate</code> and <code>font</code> to
<code>\DeclarePageStyle</code>.</li>
</ul></li>
<li>2017-04-29
<ul>
<li>Fixed bugs.</li>
<li>Added <code>jafontsize</code> and <code>jafontscale</code> options
and <code>\jafontsize</code>.</li>
<li>Added <code>\tatechuyoko</code>.</li>
<li><code>jlreq_warnings</code> -&gt; <code>jlreq_notes</code> (class
option).</li>
<li>Moved some class options to <code>\jlreqsetup</code>.</li>
<li>Added some options to <code>\jlreqsetup</code>.</li>
<li><code>paper={&lt;height&gt;,&lt;width&gt;}</code> -&gt;
<code>paper={&lt;width&gt;,&lt;height&gt;}</code>.</li>
</ul></li>
<li>2017-06-11
<ul>
<li>Stopped to load <code>plext</code> and <code>lltjext</code>.</li>
<li>Added <code>align</code> to <code>\DeclareBlockHeading</code> and
delete <code>indent=center</code>, <code>end_indent=center</code>.</li>
<li>Changed <code>\kcatcode</code> for some characters (upLaTeX).</li>
</ul></li>
<li>2017-08-13
<ul>
<li>Added <code>column_spanning</code> to
<code>\DeclareBlockHeading</code>.</li>
<li>Sidenotes are a part of the main text now.</li>
<li>Changed the default length of sidenotes to 0.</li>
<li>jlreq does not define <code>\sidenote</code> if the length for
sidenotes is zero.</li>
<li>Added a command for the full-width ideographic space.</li>
</ul></li>
<li>2017-08-29
<ul>
<li>Fixed a bug.</li>
</ul></li>
<li>2017-11-23
<ul>
<li>Fixed bugs.</li>
<li>Added <code>\SetBlockHeadingSpaces</code>.</li>
<li>Removed a space from <code>\contentsname</code> and
<code>\indexname</code>.</li>
</ul></li>
<li>2017-12-02
<ul>
<li>Fixed bugs.</li>
</ul></li>
<li>2017-12-22
<ul>
<li>Improved JFM.</li>
<li>Change the way to detect <code>\label</code> between block
headings.</li>
<li>Added chapter number to
<code>\theequation</code>，<code>\thefigure</code>，<code>\thetable</code>.</li>
</ul></li>
<li>2018-02-01
<ul>
<li>Sidenotes appears only odd pages in <code>tate</code> mode.</li>
<li>Added <code>\fnfixbottomtrue</code> for LuaLaTeX.</li>
<li>Added some options related to captions.</li>
<li>Extended <code>itemization_beforeafter_space</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2018-04-11
<ul>
<li>Sidenotes (<code>\footnote</code>) appears in the second column in
<code>tate</code> mode.</li>
<li>Added options <code>begin_widh_(odd|even)_page</code> to
<code>\DeclareBlockHeading</code>.</li>
<li>Changed <code>\labelenumi</code> as in <code>jarticle</code>
etc.</li>
<li>Fix a bug on <code>column_gap</code> class option.</li>
<li>Added <code>mark_format</code> to
<code>\DeclarePageStyle</code>.</li>
</ul></li>
<li>2018-05-19
<ul>
<li>Made the width of the label in the table of contents longer.</li>
<li>Moved some macros to jlreq-helpers.sty</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2018-06-17
<ul>
<li>Gothic font is attached to font shape 'b'.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2018-08-08
<ul>
<li>Added <code>nombre_ii</code> etc. to
<code>\DeclarePageStyle</code>.</li>
<li>Fixed bugs.</li>
<li>Added <code>footnote_second_indent</code> and
<code>endnote_second_indent</code> to <code>\jlreqsetup</code>.</li>
</ul></li>
<li>2018-08-15
<ul>
<li>Fixed bugs.</li>
</ul></li>
<li>2018-09-01
<ul>
<li>jlreq works with unusual <code>\mag</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2018-12-10
<ul>
<li>Added <code>number=[true/false]</code> to
<code>\New***Heading</code>.</li>
<li>Added options for <code>\frontmatter</code> etc in
<code>\jlreqsetup</code>.</li>
<li>Made <code>\jlreqHeadingLabel</code> etc available in
<code>format</code> in <code>\NewTobiraHeading</code> and
<code>\NewBlockHeading</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2019-01-15
<ul>
<li>Added <code>nombre_font</code> etc to <code>\NewPageStyle</code>.
<code>font</code> is deprecated.</li>
<li><code>format</code> without <code>#1</code> is allowed in
<code>\NewBlockHeading</code>.</li>
<li>Extended <code>caption_label_format</code> etc. in
<code>\jlreqsetup</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2019-04-01
<ul>
<li>Added <code>use_reverse_pagination</code> to the class option.</li>
<li>Stopped to use <code>zref</code> package.</li>
<li>New regnal year.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2019-05-07
<ul>
<li>Added a small length to <code>\textwidth</code> and
<code>\textheight</code>.</li>
<li>Changed the implementation of <code>running_head_ii</code> etc. in
<code>\DeclarePageStyle</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2019-09-24
<ul>
<li>Deleted the (re-)definitions of <code>\@cite</code> and
<code>\@biblabel</code>.</li>
<li>Added <code>\allowbreak</code> before block headings.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2020-02-07
<ul>
<li>Changed the default value of <code>itemization_label_length</code>
to <code>\leftmargini</code> etc.</li>
<li>Removed the redefinitions <code>\rmfamily</code> etc and added a
code to <code>\@rmfamilyhook</code>.</li>
<li>Changed <code>\parskip</code> to <code>0pt</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2020-05-01
<ul>
<li>Added <code>theorem_label_font</code> and <code>theorem_font</code>
to <code>\jlreqsetup</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2020-09-27
<ul>
<li>Added <code>*</code>-version of <code>\tatechuyoko</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2020-12-29
<ul>
<li><code>fontsize</code> etc. with LuaLaTeX accept <code>H</code>.</li>
<li>Added <code>\jidori</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2021-03-17
<ul>
<li>Use the pagestyle <code>plain</code> at <code>\maketitle</code> if
the current one is not <code>empty</code></li>
<li>Removed JFM glue after <code>\item</code>.</li>
<li>Removed JFM glue after block headings.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2021-05-28
<ul>
<li>Extended <code>caption_align</code> in
<code>\jlreqsetup</code>.</li>
<li>Removed some <code>\ifthenelse</code>.</li>
</ul></li>
<li>2021-07-22
<ul>
<li>Stopped to use <code>\IfHookExistsTF</code>.</li>
<li>Added <code>\akigumi</code>.</li>
<li>Stopped to load packages <code>xkeyval</code> and
<code>ifthen</code>.</li>
<li>It has more compatibility with expl3.</li>
<li>Added <code>pagestyle</code> to
<code>\DeclareBlockHeading</code>.</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2021-07-25
<ul>
<li>Load <code>ifthen</code> again. (Only for Re:VIEW, will be removed
in future.)</li>
<li>Fixed bugs.</li>
</ul></li>
<li>2021-08-12
<ul>
<li>Removed the direct dependence on <code>etoolbox</code> package.</li>
<li>Fixed a bug.</li>
</ul></li>
<li>2021-10-09
<ul>
<li>Fixed bugs.</li>
</ul></li>
<li>2021-11-05
<ul>
<li><code>paper=b*</code> is regarded as a ISO series.</li>
<li>Removed many codes relating with LaTeX hooks mechanism (because it
seems not stable.)</li>
<li>Removed <code>\RequirePackage{ifthen}</code>.</li>
<li>Removed <code>\kcatcode</code>settings with upLaTeX.</li>
</ul></li>
<li>2022-04-05
<ul>
<li>Added <code>warichu_opening</code> and <code>warichu_closing</code>
to <code>\jlreqsetup</code>.</li>
<li>Change a little bit penalties around block heading.</li>
<li>Fixed a bug: <code>\selectfont</code> after
<code>\DeclareFontShape</code> raised an error.</li>
<li>Fixed a bug: <code>use_reverse_pagination</code> did not work.</li>
<li>Fixed a bug: A second running head disappeared sometimes.</li>
<li>Rewrote <code>\DeclarePageStyle</code>.</li>
<li>Deleted <code>\@makefntext</code>, define <code>\@makefntext</code>
directly.</li>
<li>Fixed other bugs.</li>
</ul></li>
<li>2022-04-11
<ul>
<li>Fixed a bug.</li>
</ul></li>
<li>2022-07-13
<ul>
<li>Fixed a bug: The position of running heads were not correct.</li>
</ul></li>
<li>2022-11-28
<ul>
<li>Fixed a bug: did not register to running head when
<code>\SetBlockHeadingSpaces</code> is used.</li>
<li>Fixed a bug: wrong papersize for ISO C4.</li>
<li>Added a package <code>jlreq-complements</code></li>
<li>Fixed some other bugs and adjust with some other packages.</li>
</ul></li>
<li>2023-03-05
<ul>
<li>Fixed a bug on cutin headings.</li>
</ul></li>
<li>2023-06-19
<ul>
<li>Stopped to load `everyhook' package LuaLaTeX (it was not compatible
with the document).</li>
<li>Fixed a bug: a space before `enumerate' environment was not inserted
sometimes.</li>
<li>Fixed a bug on <code>use_reverse_pagination</code>.</li>
</ul></li>
</ul>
<hr />
<p>Noriyuki Abe <a
href="https://github.com/abenori/jlreq">https://github.com/abenori/jlreq</a></p>
</article>
</body>
</html>
