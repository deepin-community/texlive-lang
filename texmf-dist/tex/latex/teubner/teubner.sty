%%
%% This is file `teubner.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% teubner.dtx  (with options: `package')
%% Copyright 2001--2023 Claudio Beccari All rights reserved.
%% 
%%  This system is distributed in the hope that it will be useful,
%%  but WITHOUT ANY WARRANTY; without even the implied warranty of
%%  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
%% 
%% This file is distributed under the LPPL licence, version 1.3c
%% dated 2008-05-04 or later as it appears in
%% CTAN/macros/latex/base/lppl.tex.
%% See the end of the file.
%% 
\NeedsTeXFormat{LaTeX2e}[2020-01-01]
\ProvidesPackage{teubner}[%
2023/08/25 v.5.8.3
Extensions for Greek philology]
\RequirePackage{iftex}
\let\ifPDF\ifPDFTeX
\ifx\captionsgreek\undefined
\PackageError{teubner}{Greek language unknown!\MessageBreak
I am not going to use Lipsian fonts and Scholars' signs\MessageBreak
if Greek is unknown.\MessageBreak
Use the babel package greek option.\MessageBreak
Type X <return> to exit.}%
{Type X <return> to exit.}
\fi

\newif\ifor\orfalse % Compatibility with older versions
\DeclareOption{or}{\relax}
\newif\ifboldLipsian \boldLipsianfalse
\DeclareOption{boldLipsian}{\boldLipsiantrue}
\newif\ifonesizetypeone
\DeclareOption{10pt}{\onesizetypeonetrue}
\newif\ifGlyphNames \GlyphNamesfalse
\DeclareOption{NoGlyphNames}{\GlyphNamesfalse}
\DeclareOption{GlyphNames}{\GlyphNamestrue}
\ProcessOptions*
\def\GRenc@name{LGR}
\ifonesizetypeone
   \RequirePackage[10pt]{type1ec}[2002/09/07]
\fi
\RequirePackage{graphicx}
\RequirePackage{ifthen}
\RequirePackage{etoolbox}
\DeclareFontFamily{U}{mtr}{\hyphenchar\font\m@ne}
\ifonesizetypeone
  \DeclareFontShape{U}{mtr}{m}{n}{<-> gmtr1000}{}%
\else
  \DeclareFontShape{U}{mtr}{m}{n}{%
  <-5.5>    gmtr0500  <5.5-6.5> gmtr0600
  <6.5-7.5> gmtr0700  <7.5-8.5> gmtr0800  <8.5-9.5> gmtr0900
  <9.5-11>  gmtr1000  <11-15>   gmtr1200  <15->     gmtr1728}{}%
\fi
\DeclareFontShape{U}{mtr}{m}{it}{<->ssub*mtr/m/n}{}%
\DeclareFontShape{U}{mtr}{b}{it}{<->ssub*mtr/m/n}{}%
\DeclareFontShape{U}{mtr}{bx}{n}{<->ssub*mtr/m/n}{}%
\DeclareRobustCommand*\metricsfont{%
  \fontencoding{U}\fontfamily{mtr}\normalshape}
\DeclareTextFontCommand{\textmtr}{\metricsfont}
\RequirePackage{exscale}
\unless\ifcsname IfFileLaterThanTF\endcsname
  \def\IfFileLaterThanTF#1{\expandafter\@ifl@t@r\csname ver@#1\endcsname}%
\fi

\def\GreekName{greek}
\ifx\languageattribute\undefined
  \def\GreekName{polutonikogreek}%
\else
\IfFileLaterThanTF{greek.ldf}{2014-09-18}%
  {\languageattribute{greek}{ancient}}%
  {\languageattribute{greek}{polutoniko}}%
\fi
\newif\ifLipsian

\providecommand*\substitutefontfamily{}%
\renewcommand*\substitutefontfamily[3]{{%
  \edef\@tempA{#1#2.fd}%
  \lowercase\expandafter{\expandafter\def\expandafter\@tempA\expandafter{\@tempA}}%
  \expandafter\IfFileExists\expandafter{\@tempA}{}{%
  \immediate\openout15=\@tempA
  \typeout{Writing file #1#2.fd}
  \immediate\write15{%
    \string\ProvidesFile{#1#2.fd}^^J
    [\the\year/\two@digits{\the\month}/\two@digits{\the\day}
     \space generated font description file]^^J
    \string\DeclareFontFamily{#1}{#2}{}^^J
    \string\DeclareFontShape{#1}{#2}{m}{n}{<->ssub * #3/m/n}{}^^J
    \string\DeclareFontShape{#1}{#2}{m}{it}{<->ssub * #3/m/it}{}^^J
    \string\DeclareFontShape{#1}{#2}{m}{sl}{<->ssub * #3/m/sl}{}^^J
    \string\DeclareFontShape{#1}{#2}{m}{sc}{<->ssub * #3/m/sc}{}^^J
    \string\DeclareFontShape{#1}{#2}{b}{n}{<->ssub * #3/bx/n}{}^^J
    \string\DeclareFontShape{#1}{#2}{b}{it}{<->ssub * #3/bx/it}{}^^J
    \string\DeclareFontShape{#1}{#2}{b}{sl}{<->ssub * #3/bx/sl}{}^^J
    \string\DeclareFontShape{#1}{#2}{b}{sc}{<->ssub * #3/bx/sc}{}^^J
    \string\DeclareFontShape{#1}{#2}{bx}{n}{<->ssub * #3/bx/n}{}^^J
    \string\DeclareFontShape{#1}{#2}{bx}{it}{<->ssub * #3/bx/it}{}^^J
    \string\DeclareFontShape{#1}{#2}{bx}{sl}{<->ssub * #3/bx/sl}{}^^J
    \string\DeclareFontShape{#1}{#2}{bx}{sc}{<->ssub * #3/bx/sc}{}^^J
    }%
    \ifLipsian
    \immediate\write15{%
    \string\DeclareFontShape{#1}{#2}{m}{li}{<->ssub * #3/m/li}{}^^J %<- Lipsian
    \string\DeclareFontShape{#1}{#2}{b}{li}{<->ssub * #3/b/li}{}^^J %<- Lipsian
    \string\DeclareFontShape{#1}{#2}{bx}{li}{<->ssub * #3/bx/li}{}^^J %<-Lipsian
    \string\DeclareFontShape{#1}{#2}{m}{ui}{<->ssub * #3/m/ui}{}^^J %<- upright Olga
    \string\DeclareFontShape{#1}{#2}{b}{ui}{<->ssub * #3/m/ui}{}^^J %<- upright Olga
    \string\DeclareFontShape{#1}{#2}{bx}{ui}{<->ssub * #3/bx/ui}{}^^J%<-upright Olga
    \string\DeclareFontShape{#1}{#2}{m}{rs}{<->ssub * #3/m/rs}{}^^J %<-serifed lc
    \string\DeclareFontShape{#1}{#2}{b}{rs}{<->ssub * #3/m/rs}{}^^J %<-serifed lc
    \string\DeclareFontShape{#1}{#2}{bx}{rs}{<->ssub * #3/bx/rs}{}^^J%<-serifed lc
    }%
    \global\Lipsianfalse\fi
  \closeout15}%
  }%
}

\def\ifCMLM#1#2#3!{\edef\f@milyprefix{#1#2}%
   \ifthenelse{\(\equal{\f@milyprefix}{cm}\OR\equal{\f@milyprefix}{lm}\)}%
   {\let\n@xt\iftrue}{\def\f@milyprefix{cmr}\let\n@xt\iffalse}\n@xt}

\newcommand*\ifFamily[2]{%
\expandafter\ifCMLM#1!\else\substitutefontfamily{LGR}{#1}{#2}\fi}

\AtBeginDocument{%
\input{ot1cmr.fd}
\DeclareFontShape{OT1}{cmr}{m}{li}{<->ssub* cmr/m/it}{}
\@ifpackageloaded{pxfonts}{\typeout{Palatino fonts loaded}%
\Lipsiantrue\ifFamily{pxr}{cmr}
\input{ot1pxr.fd}\input{t1pxr.fd}\input{ts1pxr.fd}%
\DeclareFontShape{OT1}{pxr}{b}{li}{<->ssub* pxr/b/it}{}%
\DeclareFontShape{T1}{pxr}{b}{li}{<->ssub* pxr/b/it}{}%
\DeclareFontShape{TS1}{pxr}{m}{li}{<->ssub* pxr/m/it}{}%
\Lipsianfalse
\ifFamily{pxss}{cmss}\ifFamily{pxtt}{cmtt}}{\relax}
\@ifpackageloaded{txfonts}{\typeout{Times fonts loaded}%
\RequirePackage{teubnertx}%
\input{ot1txr.fd}\input{t1txr.fd}\input{ts1txr.fd}%
\DeclareFontShape{OT1}{txr}{b}{li}{<->ssub* txr/b/it}{}%
\DeclareFontShape{T1}{txr}{b}{li}{<->ssub* txr/b/it}{}%
\DeclareFontShape{TS1}{txr}{m}{li}{<->ssub* txr/m/it}{}%
}{}}

\AtBeginDocument{%
    \edef\previouslanguage{\languagename}%
    \edef\previousencoding{\f@encoding}}
\DeclareRobustCommand{\lishape}{%
\not@math@alphabet\lishape\relax
\ifthenelse{\equal{\f@encoding}{\GRenc@name}}{%
\ifboldLipsian
\ifthenelse{\equal{\f@series}{m}}%
{\fontseries{b}\fontshape{li}\rmfamily}%
{\fontshape{li}\rmfamily}\else
\fontshape{li}\rmfamily\fi}%
{\fontshape{it}\selectfont}}%

\DeclareTextFontCommand{\textli}{\lishape}%
\DeclareRobustCommand\Lipsiakostext{%
    \expandafter\select@language\expandafter{\GreekName}%
    \let\~\accperispomeni\let~\accperispomeni\lishape}

\DeclareTextFontCommand{\textLipsias}{\Lipsiakostext}

\DeclareRobustCommand\NoLipsiakostext{%
    \ifthenelse{\equal{\f@series}{b}}{\fontseries{m}}{\relax}%
    \fontshape{n}\selectfont
    \expandafter\select@language\expandafter{\previouslanguage}%
    \rmfamily\bbl@activate{~}}

\DeclareRobustCommand\textDidot[1]{{%
    \expandafter\select@language\expandafter{\GreekName}%
    \let\~\accperispomeni\let~\accperispomeni
    \fontencoding{LGR}\rmfamily#1}}

\AtBeginDocument{%
  \ProvideDocumentEnvironment{GRD}{m}{}{}
  \ProvideDocumentEnvironment{GRL}{m}{}{}

\RenewDocumentEnvironment{GRL}{o}{\begin{otherlanguage*}{greek}%
\@ifclassloaded{memoir}{\def\bfseries{\fontseries{bx}\selectfont}}{\relax}%
\@ifclassloaded{scrbook}{\def\bfseries{\fontseries{bx}\selectfont}}{\relax}%
\IfValueTF{#1}{\fontseries{#1}}{}%
  \fontshape{li}\selectfont}{\end{otherlanguage*}}%

\RenewDocumentEnvironment{GRD}{o}{\begin{otherlanguage*}{greek}%
\@ifclassloaded{memoir}{\def\bfseries{\fontseries{bx}\selectfont}}{\relax}%
\@ifclassloaded{scrbook}{\def\bfseries{\fontseries{bx}\selectfont}}{\relax}%
\IfValueTF{#1}{\fontseries{#1}}{}%
  \fontshape{up}\selectfont}{\end{otherlanguage*}}%
}
\DeclareRobustCommand\textlatin[1]{\edef\externalencoding{\f@encoding}{%
  \def\itdefault{it}\def\@tempA{li}\ifx\@tempA\f@shape\def\f@shape{it}\fi
  \expandafter\select@language\expandafter{\previouslanguage}%
  \fontencoding{\previousencoding}%
  \fontfamily{\rmdefault}\selectfont
  \bbl@activate{~}#1}%
  \expandafter\fontencoding\expandafter{\externalencoding}\rmfamily}

\DeclareRobustCommand\uishape{%
\ifthenelse{\equal{\f@encoding}{\GRenc@name}}%
{\fontshape{ui}\selectfont}{\relax}}
\DeclareTextFontCommand{\textui}{\uishape}

\DeclareRobustCommand\rsshape{%
\ifthenelse{\equal{\f@encoding}{\GRenc@name}}%
{\fontshape{rs}\selectfont}{\relax}}
\DeclareTextFontCommand{\textrs}{\rsshape}

\newcommand*\lift@accent[2]{\leavevmode
{\edef\slant@{\strip@pt\fontdimen1\font}%
\dimen@=\z@\setbox\z@\hbox{\char#1}\advance\dimen@-.5\wd\z@
\setbox\tw@\hbox{i}\setbox\z@\hbox{#2}%
\ifdim\wd\z@>\wd\tw@\advance\dimen@ .5\wd\z@
    \else\advance\dimen@ .3\wd\z@\fi
\ifx#2h\advance\dimen@.05\wd\z@\fi
\@tempdima\ht\z@\advance\@tempdima-1ex\relax
\advance\dimen@\slant@\@tempdima
\raise\@tempdima\hbox to\z@{\kern\dimen@\char#1\relax\hss}\box\z@}}

\newcommand*\Lift@accent[2]{\leavevmode
{\edef\slant@{\strip@pt\fontdimen1\font}%
\dimen@=\z@\setbox\z@\hbox{\char#1}\advance\dimen@-.5\wd\z@
\setbox\tw@\hbox{i}\setbox\z@\hbox{#2}%
\ifdim\wd\z@>\wd\tw@\advance\dimen@ .5\wd\z@
\else\advance\dimen@ .3\wd\z@\fi
\ifx#2a\advance\dimen@-.1\wd\z@\fi
\ifx#2h\advance\dimen@.05\wd\z@\fi
\@tempdima\ht\z@\advance\@tempdima-1ex\advance\@tempdima.1ex\relax
\advance\dimen@\slant@\@tempdima
\raise\@tempdima\hbox to\z@{\kern\dimen@\char#1\relax\hss}\box\z@}}

\newcommand*\LIFT@accent[3]{\leavevmode
{\edef\slant@{\strip@pt\fontdimen1\font}%
\dimen@=\z@\setbox\z@\hbox{\char#1}\advance\dimen@-.5\wd\z@
\setbox\tw@\hbox{i}\setbox\z@\hbox{#3}%
\ifdim\wd\z@>\wd\tw@\advance\dimen@ .5\wd\z@
\else\advance\dimen@ .3\wd\z@\fi
\ifx#2a\advance\dimen@-.1\wd\z@\fi
\ifx#2h\advance\dimen@.05\wd\z@\fi
\@tempdima\ht\z@\advance\@tempdima-1ex\relax
\def\@tempA{#2}\ifx\@tempA\undefined\else
\advance\@tempdima#2\fi\let\@tempA\undefined
\advance\dimen@\slant@\@tempdima
\raise\@tempdima\hbox to\z@{\kern\dimen@\char#1\relax\hss}\box\z@}}

\DeclareRobustCommand{\cap@}[1]{\leavevmode
{\edef\slant@{\strip@pt\fontdimen1\font}%
\setbox\tw@\hbox{\fontencoding{\GRenc@name}\selectfont
    \char1}\dimen@-.5\wd\tw@
\setbox\z@\hbox{#1}%
\advance\dimen@ .5\wd\z@
\@tempdima\ht\z@\advance\@tempdima.55ex\relax
\advance\dimen@\slant@\@tempdima
\ifx\cf@encoding\GRenc@name\else
\ifx#1k\advance\dimen@-.3\wd\tw@\fi\fi
\raise\@tempdima\hbox to\z@{\kern\dimen@\box\tw@\relax\hss}\box\z@}}

\let\mcap\cap
\DeclareTextCommand{\tcap}{\GRenc@name}{\cap@}
\DeclareTextCommand{\tcap}{OT1}{\cap@}
\DeclareTextCommand{\tcap}{T1}{\cap@}
\DeclareRobustCommand*\cap{\textormath{\tcap}{\mcap}}
\newcommand*\cap@cedilla[1]{\leavevmode
{\setbox4\hbox{\fontencoding{\GRenc@name}\selectfont\char1}%
\dimen@-.5\wd4
\setbox\z@\hbox{#1}%
\ifx\cf@encoding\GRenc@name
   \ifx#1i\advance\dimen@ .65\wd\z@\else\advance\dimen@ .5\wd\z@\fi
\else
   \ifx#1i\advance\dimen@ .55\wd\z@\else\advance\dimen@ .5\wd\z@\fi
\fi
\hbox to\z@{\kern\dimen@\box4\hss}\unhbox\z@}}

\newcommand*\ring@cedilla[1]{\leavevmode
{\setbox4\hbox{\metricsfont\char26}%
\edef\slant@{\strip@pt\fontdimen1\font}%
\dimen@-.5\wd4\ifdim\slant@\p@>\z@\advance\dimen@-.04ex\fi
\setbox\z@\hbox{#1}%
\ifx\cf@encoding\GRenc@name
    \advance\dimen@ .45\wd\z@
    \ifx#1h\advance\dimen@-.13\wd\z@\fi
    \ifx#1a\advance\dimen@-.07\wd\z@\fi
    \ifx#1o\advance\dimen@-.07\wd\z@\fi
    \ifx#1u\advance\dimen@+.07\wd\z@\fi
    \ifx#1w\advance\dimen@+.03\wd\z@\fi
\else
    \ifx#1i\advance\dimen@.55\wd\z@\else
    \ifx#1r\advance\dimen@.38\wd\z@\else
    \ifx#1o\advance\dimen@.47\wd\z@\else
           \advance\dimen@0.5\wd\z@
    \fi\fi\fi
\fi
\hbox to\z@{\kern\dimen@\box4\hss}\unhbox\z@}}

\newcommand*\dot@cedilla[1]{\leavevmode
{\setbox4\hbox{\metricsfont\char27}%
\dimen@-.5\wd4
\setbox\tw@\hbox{i}\setbox\z@\hbox{#1}%
\ifx\cf@encoding\GRenc@name
    \advance\dimen@ .5\wd\z@
    \ifx#1h\advance\dimen@-.13\wd\z@\fi
\else
    \ifdim\wd\z@>\wd\tw@\advance\dimen@.55\wd\z@
        \else\advance\dimen@.5\wd\tw@\fi
\fi
\setbox\tw@\hbox{o}\ifdim\wd\z@=\wd\tw@\advance\dimen@-.05\wd\z@\fi
\hbox to\z@{\kern\dimen@\box4\hss}\unhbox\z@}}

\newcommand*\tie@cedilla[1]{\leavevmode
{\setbox4\hbox{\fontencoding{\GRenc@name}\selectfont\char20}%
\dimen@-.5\wd4
\setbox\tw@\hbox{i}\setbox\z@\hbox{#1}%
\ifx\cf@encoding\GRenc@name
    \advance\dimen@.5\wd\z@
    \ifx#1h\advance\dimen@-.1\wd\z@\fi
    \ifx#1u\advance\dimen@.15\wd\z@\fi
\else
    \ifdim\wd\z@>\wd\tw@\advance\dimen@ .55\wd\z@
        \else\advance\dimen@ .5\wd\tw@\fi
\fi
\setbox\tw@\hbox{o}\ifdim\wd\z@=\wd\tw@\advance\dimen@-.05\wd\z@\fi
\hbox to\z@{\kern\dimen@\box4\hss}\unhbox\z@}}

\AtEndPreamble{\RequirePackage{textalpha}}
\let\nbs\nobreakspace
\let\accacuto\'
\let\accgrave\`
\let\acccircon\~
\let\accdieresi\"
\let\accbreve\u
\let\accmacron\=
\DeclareTextCommand{\G}{\GRenc@name}[1]{\lift@accent{96}{#1}}
\DeclareTextCommand{\A}{\GRenc@name}[1]{\lift@accent{39}{#1}}
\DeclareTextCommand{\C}{\GRenc@name}[1]{\lift@accent{126}{#1}}
\DeclareTextCommand{\D}{\GRenc@name}[1]{\lift@accent{34\textcompwordmark}{#1}}
\DeclareTextCommand{\B}{\GRenc@name}[1]{\lift@accent{30}{#1}}
\DeclareTextCommand{\M}{\GRenc@name}[1]{\lift@accent{31}{#1}}
\addto\extrasgreek{\shorthandoff{~}\let\~\accperispomeni
\let\"\accdialytika\let\'\acctonos\let\`\accvaria}
\addto\noextrasgreek{\shorthandon{~}\let\~\acccircon
\let\"\accdieresi\let\'\accacuto\let\`\accgrave}

\DeclareTextCommand{\U}{\GRenc@name}[1]{\lift@accent{151}{#1}}
\DeclareTextCommand{\r}{\GRenc@name}[1]{\lift@accent{60}{#1}}
\DeclareTextCommand{\s}{\GRenc@name}[1]{\lift@accent{62}{#1}}
\DeclareTextCommand{\Ad}{\GRenc@name}[1]{\lift@accent{35}{#1}}
\DeclareTextCommand{\Gd}{\GRenc@name}[1]{\lift@accent{36}{#1}}
\DeclareTextCommand{\Cd}{\GRenc@name}[1]{\lift@accent{32}{#1}}
\DeclareTextCommand{\Ar}{\GRenc@name}[1]{\lift@accent{86}{#1}}
\DeclareTextCommand{\Gr}{\GRenc@name}[1]{\lift@accent{67}{#1}}
\DeclareTextCommand{\Cr}{\GRenc@name}[1]{\lift@accent{64}{#1}}
\DeclareTextCommand{\As}{\GRenc@name}[1]{\lift@accent{94}{#1}}
\DeclareTextCommand{\Gs}{\GRenc@name}[1]{\lift@accent{95}{#1}}
\DeclareTextCommand{\Cs}{\GRenc@name}[1]{\lift@accent{92}{#1}}
\DeclareTextCommand{\c}{\GRenc@name}[1]{\cap@cedilla{#1}}
\DeclareTextCommand{\semiv}{\GRenc@name}[1]{\cap@cedilla{#1}}
\DeclareTextCommand{\semiv}{OT1}[1]{\cap@cedilla{#1}}
\DeclareTextCommand{\semiv}{T1}[1]{\cap@cedilla{#1}}
\DeclareTextCommand{\ring}{\GRenc@name}[1]{\ring@cedilla{#1}}
\DeclareTextCommand{\ring}{OT1}[1]{\ring@cedilla{#1}}
\DeclareTextCommand{\ring}{T1}[1]{\ring@cedilla{#1}}
\DeclareTextCommand{\Dot}{\GRenc@name}[1]{\dot@cedilla{#1}}
\DeclareTextCommand{\Dot}{OT1}[1]{\dot@cedilla{#1}}
\DeclareTextCommand{\Dot}{T1}[1]{\dot@cedilla{#1}}
\DeclareTextCommand{\ut}{\GRenc@name}[1]{\tie@cedilla{#1}}
\DeclareTextCommand{\ut}{OT1}[1]{\tie@cedilla{#1}}
\DeclareTextCommand{\ut}{T1}[1]{\tie@cedilla{#1}}
\DeclareTextCommand{\Ab}{\GRenc@name}[1]%
    {\LIFT@accent{39}{-.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\Gb}{\GRenc@name}[1]%
    {\LIFT@accent{96}{-.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\Arb}{\GRenc@name}[1]%
    {\LIFT@accent{86}{-.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\Grb}{\GRenc@name}[1]%
    {\LIFT@accent{67}{-.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\Asb}{\GRenc@name}[1]%
    {\LIFT@accent{94}{-.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\Gsb}{\GRenc@name}[1]%
    {\LIFT@accent{95}{-.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\Am}{\GRenc@name}[1]%
    {\Lift@accent{39}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Gm}{\GRenc@name}[1]%
    {\Lift@accent{96}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Cm}{\GRenc@name}[1]%
    {\Lift@accent{126}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Arm}{\GRenc@name}[1]%
    {\Lift@accent{86}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Grm}{\GRenc@name}[1]%
    {\Lift@accent{67}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Crm}{\GRenc@name}[1]%
    {\Lift@accent{64}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Asm}{\GRenc@name}[1]%
    {\Lift@accent{94}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Gsm}{\GRenc@name}[1]%
    {\Lift@accent{95}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Csm}{\GRenc@name}[1]%
    {\Lift@accent{92}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Sm}{\GRenc@name}[1]%
    {\Lift@accent{62}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Rm}{\GRenc@name}[1]%
    {\Lift@accent{60}{\lift@accent{31}{#1}}}
\DeclareTextCommand{\Sb}{\GRenc@name}[1]%
    {\LIFT@accent{62}{-0.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\Rb}{\GRenc@name}[1]%
    {\LIFT@accent{60}{-0.15ex}{\lift@accent{30}{#1}}}
\DeclareTextCommand{\bd}{\GRenc@name}[1]%
    {\LIFT@accent{30}{-.1ex}{\lift@accent{34v}{#1}}}
\DeclareTextCommand{\iS}{\GRenc@name}[1]
   {\ooalign{#1\crcr\hidewidth\char124\hidewidth}}

\DeclareTextCommand{\d}{\GRenc@name}[1]%
   {\leavevmode\bgroup\o@lign{\relax#1\crcr
    \hidewidth\sh@ft{10}.\hidewidth}\egroup}

\DeclareRobustCommand{\Open}[1]{\leavevmode
{\setbox4\hbox{\raise-.33ex\hbox{\metricsfont\char14}}%
\dimen@-.5\wd4
\setbox\tw@\hbox{i}\setbox\z@\hbox{#1}%
\ifx\cf@encoding\GRenc@name
    \advance\dimen@ .5\wd\z@
    \setbox\tw@\hbox{h}\ifdim\wd\z@=\wd\tw@\advance\dimen@-.13\wd\z@\fi
\else
    \ifdim\wd\z@>\wd\tw@\advance\dimen@ .55\wd\z@
        \else\advance\dimen@ .5\wd\tw@\fi
\fi
\setbox\tw@\hbox{o}\ifdim\wd\z@=\wd\tw@\advance\dimen@-.05\wd\z@\fi
\hbox to\z@{\kern\dimen@\box4\hss}\unhbox\z@}}

\DeclareRobustCommand{\nasal}[1]{\leavevmode
{\setbox4\hbox{\raise-1.7ex\hbox{\GEcq}}%
\dimen@-.5\wd4
\setbox\tw@\hbox{i}\setbox\z@\hbox{#1}%
\ifx\cf@encoding\GRenc@name
    \advance\dimen@ .5\wd\z@
    \setbox\tw@\hbox{h}\ifdim\wd\z@=\wd\tw@\advance\dimen@-.13\wd\z@\fi
\else
    \ifdim\wd\z@>\wd\tw@\advance\dimen@ .55\wd\z@
        \else\advance\dimen@ .5\wd\tw@\fi
\fi
\setbox\tw@\hbox{o}\ifdim\wd\z@=\wd\tw@\advance\dimen@-.05\wd\z@\fi
\hbox to\z@{\kern\dimen@\box4\hss}\unhbox\z@}}

\DeclareRobustCommand{\tenaspir}[1]{#1\/%
    {\fontencoding{\GRenc@name}\selectfont<v}}
\DeclareRobustCommand{\palat}[1]{#1{%
    \expandafter\fontencoding\expandafter{\GRenc@name}\selectfont
    \anwtonos}}

\DeclareTextCommand{\Ud}{\GRenc@name}[1]{\d{\u{#1}}}
\DeclareTextCommand{\md}{\GRenc@name}[1]{\d{\={#1}}}
\DeclareTextCommand{\UO}{\GRenc@name}[1]{\Open{\u{#1}}}
\DeclareTextCommand{\mO}{\GRenc@name}[1]{\Open{\={#1}}}

\DeclareTextCommand{\Ud}{T1}[1]{\d{\u{#1}}}
\DeclareTextCommand{\md}{T1}[1]{\d{\={#1}}}
\DeclareTextCommand{\UO}{T1}[1]{\Open{\u{#1}}}
\DeclareTextCommand{\mO}{T1}[1]{\Open{\={#1}}}
\DeclareTextCommand{\Ud}{OT1}[1]{\d{\u{#1}}}
\DeclareTextCommand{\md}{OT1}[1]{\d{\={#1}}}
\DeclareTextCommand{\UO}{OT1}[1]{\Open{\u{#1}}}
\DeclareTextCommand{\mO}{OT1}[1]{\Open{\={#1}}}

\let\stigma\textstigma \let\Stigma\textStigma
\let\varstigma\textvarstigma
\let\koppa\textkoppa \let\Koppa\textQoppa
\let\qoppa\textqoppa
\let\varkoppa\textqoppa
\let\coppa\textqoppa \let\Coppa\textQoppa
\let\sampi\textsampi \let\Sampi\textSampi
\let\f\textdigamma   \let\F\textDigamma \let\Digamma\F
\let\Euro\texteuro
\let\permill\textperthousand
\let\schwa\textschwa
\DeclareTextCommand{\textdollar}{\GRenc@name}%
    {{\fontencoding{T1}\selectfont\char36}}
\DeclareTextCommand{\textsection}{\GRenc@name}%
    {{\fontencoding{T1}\selectfont\char159}}
\DeclareTextCommand{\textsterling}{\GRenc@name}%
    {{\fontencoding{T1}\selectfont\char191}}
\DeclareTextCommand{\textunderscore}{\GRenc@name}%
    {{\fontencoding{T1}\selectfont\char95}}
\DeclareTextCommand{\textvisiblespace}{\GRenc@name}%
    {{\fontencoding{T1}\selectfont\char32}}

\ifGlyphNames
\DeclareTextSymbol{\ag}{\GRenc@name}{128}
\DeclareTextSymbol{\ar}{\GRenc@name}{129}
\DeclareTextComposite{\r}{\GRenc@name}{a}{129}
\DeclareTextSymbol{\as}{\GRenc@name}{130}
\DeclareTextComposite{\s}{\GRenc@name}{a}{130}
\DeclareTextSymbol{\aa}{\GRenc@name}{136}
\DeclareTextSymbol{\ac}{\GRenc@name}{144}
\DeclareTextSymbol{\ai}{\GRenc@name}{248}
\DeclareTextSymbol{\aai}{\GRenc@name}{140}
\DeclareTextSymbol{\aci}{\GRenc@name}{148}
\DeclareTextSymbol{\agi}{\GRenc@name}{132}
\DeclareTextSymbol{\ara}{\GRenc@name}{137}
\DeclareTextComposite{\Ar}{\GRenc@name}{a}{137}
\DeclareTextSymbol{\arc}{\GRenc@name}{145}
\DeclareTextComposite{\Cr}{\GRenc@name}{a}{145}
\DeclareTextSymbol{\arg}{\GRenc@name}{131}
\DeclareTextComposite{\Gr}{\GRenc@name}{a}{131}
\DeclareTextSymbol{\ari}{\GRenc@name}{133}
\DeclareTextSymbol{\asa}{\GRenc@name}{138}
\DeclareTextComposite{\As}{\GRenc@name}{a}{138}
\DeclareTextSymbol{\asc}{\GRenc@name}{146}
\DeclareTextComposite{\Cs}{\GRenc@name}{a}{146}
\DeclareTextSymbol{\asg}{\GRenc@name}{139}
\DeclareTextComposite{\Gs}{\GRenc@name}{a}{139}
\DeclareTextSymbol{\asi}{\GRenc@name}{134}
\DeclareTextSymbol{\argi}{\GRenc@name}{135}
\DeclareTextSymbol{\arai}{\GRenc@name}{141}
\DeclareTextSymbol{\arci}{\GRenc@name}{149}
\DeclareTextSymbol{\asai}{\GRenc@name}{142}
\DeclareTextSymbol{\asgi}{\GRenc@name}{143}
\DeclareTextSymbol{\asci}{\GRenc@name}{150}
\DeclareTextSymbol{\hg}{\GRenc@name}{152}
\DeclareTextSymbol{\hr}{\GRenc@name}{153}
\DeclareTextComposite{\r}{\GRenc@name}{h}{153}
\DeclareTextSymbol{\hs}{\GRenc@name}{154}
\DeclareTextComposite{\s}{\GRenc@name}{h}{154}
\DeclareTextSymbol{\hrg}{\GRenc@name}{163}
\DeclareTextComposite{\Gr}{\GRenc@name}{h}{163}
\DeclareTextSymbol{\hgi}{\GRenc@name}{156}
\DeclareTextSymbol{\hri}{\GRenc@name}{157}
\DeclareTextSymbol{\hsi}{\GRenc@name}{158}
\DeclareTextSymbol{\hrgi}{\GRenc@name}{167}
\DeclareTextSymbol{\ha}{\GRenc@name}{160}
\DeclareTextSymbol{\hra}{\GRenc@name}{161}
\DeclareTextComposite{\Ar}{\GRenc@name}{h}{161}
\DeclareTextSymbol{\hsa}{\GRenc@name}{162}
\DeclareTextComposite{\As}{\GRenc@name}{h}{162}
\DeclareTextSymbol{\hsg}{\GRenc@name}{171}
\DeclareTextComposite{\Gs}{\GRenc@name}{h}{171}
\DeclareTextSymbol{\hai}{\GRenc@name}{164}
\DeclareTextSymbol{\hrai}{\GRenc@name}{165}
\DeclareTextSymbol{\hsai}{\GRenc@name}{166}
\DeclareTextSymbol{\hsgi}{\GRenc@name}{175}
\DeclareTextSymbol{\hc}{\GRenc@name}{168}
\DeclareTextSymbol{\hrc}{\GRenc@name}{169}
\DeclareTextComposite{\Cr}{\GRenc@name}{h}{169}
\DeclareTextSymbol{\hsc}{\GRenc@name}{170}
\DeclareTextComposite{\Cs}{\GRenc@name}{h}{170}
\DeclareTextSymbol{\hci}{\GRenc@name}{172}
\DeclareTextSymbol{\hrci}{\GRenc@name}{173}
\DeclareTextSymbol{\hsci}{\GRenc@name}{174}
\DeclareTextSymbol{\hi}{\GRenc@name}{249}
\DeclareTextSymbol{\wg}{\GRenc@name}{176}
\DeclareTextSymbol{\wr}{\GRenc@name}{177}
\DeclareTextComposite{\r}{\GRenc@name}{w}{177}
\DeclareTextSymbol{\ws}{\GRenc@name}{178}
\DeclareTextComposite{\s}{\GRenc@name}{w}{178}
\DeclareTextSymbol{\wrg}{\GRenc@name}{179}
\DeclareTextComposite{\Gr}{\GRenc@name}{w}{179}
\DeclareTextSymbol{\wgi}{\GRenc@name}{180}
\DeclareTextSymbol{\wri}{\GRenc@name}{181}
\DeclareTextSymbol{\wsi}{\GRenc@name}{182}
\DeclareTextSymbol{\wrgi}{\GRenc@name}{183}
\DeclareTextSymbol{\wa}{\GRenc@name}{184}
\DeclareTextSymbol{\wra}{\GRenc@name}{185}
\DeclareTextComposite{\Ar}{\GRenc@name}{w}{185}
\DeclareTextSymbol{\wsa}{\GRenc@name}{186}
\DeclareTextComposite{\As}{\GRenc@name}{w}{186}
\DeclareTextSymbol{\wsg}{\GRenc@name}{187}
\DeclareTextComposite{\Gs}{\GRenc@name}{w}{187}
\DeclareTextSymbol{\wai}{\GRenc@name}{188}
\DeclareTextSymbol{\wrai}{\GRenc@name}{189}
\DeclareTextSymbol{\wsai}{\GRenc@name}{190}
\DeclareTextSymbol{\wsgi}{\GRenc@name}{191}
\DeclareTextSymbol{\wc}{\GRenc@name}{192}
\DeclareTextSymbol{\wrc}{\GRenc@name}{193}
\DeclareTextComposite{\Cr}{\GRenc@name}{w}{193}
\DeclareTextSymbol{\wsc}{\GRenc@name}{194}
\DeclareTextComposite{\Cs}{\GRenc@name}{w}{194}
\DeclareTextSymbol{\wci}{\GRenc@name}{196}
\DeclareTextSymbol{\wrci}{\GRenc@name}{197}
\DeclareTextSymbol{\wsci}{\GRenc@name}{198}
\DeclareTextSymbol{\wi}{\GRenc@name}{250}
\DeclareTextSymbol{\ig}{\GRenc@name}{200}
\DeclareTextSymbol{\ir}{\GRenc@name}{201}
\DeclareTextComposite{\r}{\GRenc@name}{i}{201}
\DeclareTextSymbol{\is}{\GRenc@name}{202}
\DeclareTextComposite{\s}{\GRenc@name}{i}{202}
\DeclareTextSymbol{\irg}{\GRenc@name}{203}
\DeclareTextComposite{\Gr}{\GRenc@name}{i}{203}
\DeclareTextSymbol{\ia}{\GRenc@name}{208}
\DeclareTextSymbol{\ira}{\GRenc@name}{209}
\DeclareTextComposite{\Ar}{\GRenc@name}{i}{209}
\DeclareTextSymbol{\isa}{\GRenc@name}{210}
\DeclareTextComposite{\As}{\GRenc@name}{i}{210}
\DeclareTextSymbol{\isg}{\GRenc@name}{211}
\DeclareTextComposite{\Gs}{\GRenc@name}{i}{211}
\DeclareTextSymbol{\ic}{\GRenc@name}{216}
\DeclareTextSymbol{\irc}{\GRenc@name}{217}
\DeclareTextComposite{\Cr}{\GRenc@name}{i}{217}
\DeclareTextSymbol{\isc}{\GRenc@name}{218}
\DeclareTextComposite{\Cs}{\GRenc@name}{i}{218}
\DeclareTextSymbol{\id}{\GRenc@name}{240}
\DeclareTextSymbol{\idg}{\GRenc@name}{241}
\DeclareTextComposite{\Gd}{\GRenc@name}{i}{241}
\DeclareTextSymbol{\ida}{\GRenc@name}{242}
\DeclareTextComposite{\Ad}{\GRenc@name}{i}{242}
\DeclareTextSymbol{\idc}{\GRenc@name}{243}
\DeclareTextComposite{\Cd}{\GRenc@name}{i}{243}
\DeclareTextSymbol{\ug}{\GRenc@name}{204}
\DeclareTextSymbol{\ur}{\GRenc@name}{205}
\DeclareTextComposite{\r}{\GRenc@name}{u}{205}
\DeclareTextSymbol{\us}{\GRenc@name}{206}
\DeclareTextComposite{\s}{\GRenc@name}{u}{206}
\DeclareTextSymbol{\urg}{\GRenc@name}{207}
\DeclareTextComposite{\Gr}{\GRenc@name}{u}{207}
\DeclareTextSymbol{\ua}{\GRenc@name}{212}
\DeclareTextSymbol{\ura}{\GRenc@name}{213}
\DeclareTextComposite{\Ar}{\GRenc@name}{u}{213}
\DeclareTextSymbol{\usa}{\GRenc@name}{214}
\DeclareTextComposite{\As}{\GRenc@name}{u}{214}
\DeclareTextSymbol{\usg}{\GRenc@name}{215}
\DeclareTextComposite{\Gs}{\GRenc@name}{u}{215}
\DeclareTextSymbol{\uc}{\GRenc@name}{220}
\DeclareTextSymbol{\urc}{\GRenc@name}{221}
\DeclareTextComposite{\Cr}{\GRenc@name}{u}{221}
\DeclareTextSymbol{\usc}{\GRenc@name}{222}
\DeclareTextComposite{\Cs}{\GRenc@name}{u}{222}
\DeclareTextSymbol{\ud}{\GRenc@name}{244}
\DeclareTextSymbol{\udg}{\GRenc@name}{245}
\DeclareTextComposite{\Gd}{\GRenc@name}{u}{245}
\DeclareTextSymbol{\uda}{\GRenc@name}{246}
\DeclareTextComposite{\Ad}{\GRenc@name}{u}{246}
\DeclareTextSymbol{\udc}{\GRenc@name}{247}
\DeclareTextComposite{\Cd}{\GRenc@name}{u}{247}
\DeclareTextSymbol{\eg}{\GRenc@name}{224}
\DeclareTextSymbol{\er}{\GRenc@name}{225}
\DeclareTextComposite{\r}{\GRenc@name}{e}{225}
\DeclareTextSymbol{\es}{\GRenc@name}{226}
\DeclareTextComposite{\s}{\GRenc@name}{e}{226}
\DeclareTextSymbol{\erg}{\GRenc@name}{227}
\DeclareTextComposite{\Gr}{\GRenc@name}{e}{227}
\DeclareTextSymbol{\ea}{\GRenc@name}{232}
\DeclareTextSymbol{\era}{\GRenc@name}{233}
\DeclareTextComposite{\Ar}{\GRenc@name}{e}{233}
\DeclareTextSymbol{\esa}{\GRenc@name}{234}
\DeclareTextComposite{\As}{\GRenc@name}{e}{234}
\DeclareTextSymbol{\esg}{\GRenc@name}{235}
\DeclareTextComposite{\Gs}{\GRenc@name}{e}{235}
\DeclareTextSymbol{\oR}{\GRenc@name}{229}
\DeclareTextComposite{\r}{\GRenc@name}{o}{229}
\DeclareTextSymbol{\oG}{\GRenc@name}{228}
\DeclareTextSymbol{\os}{\GRenc@name}{230}
\DeclareTextComposite{\s}{\GRenc@name}{o}{230}
\DeclareTextSymbol{\org}{\GRenc@name}{231}
\DeclareTextComposite{\Gr}{\GRenc@name}{o}{231}
\DeclareTextSymbol{\oa}{\GRenc@name}{236}
\DeclareTextSymbol{\ora}{\GRenc@name}{237}
\DeclareTextComposite{\Ar}{\GRenc@name}{o}{237}
\DeclareTextSymbol{\osa}{\GRenc@name}{238}
\DeclareTextComposite{\As}{\GRenc@name}{o}{238}
\DeclareTextSymbol{\osg}{\GRenc@name}{239}
\DeclareTextComposite{\Gs}{\GRenc@name}{o}{239}
\DeclareTextSymbol{\rr}{\GRenc@name}{251}
\DeclareTextComposite{\r}{\GRenc@name}{r}{251}
\DeclareTextSymbol{\rs}{\GRenc@name}{252}
\DeclareTextComposite{\s}{\GRenc@name}{r}{252}
\DeclareTextSymbol{\Id}{\GRenc@name}{219}
\DeclareTextSymbol{\Ud}{\GRenc@name}{223}
\DeclareTextComposite{\"}{\GRenc@name}{U}{223}
\fi

\DeclareTextCommand{\h}{\GRenc@name}%
    {{\fontencoding{OT1}\selectfont h}}
\DeclareTextCommand{\q}{\GRenc@name}%
    {{\fontencoding{OT1}\selectfont q}}
\DeclareTextCommand{\yod}{\GRenc@name}%
    {{\fontencoding{OT1}\selectfont j}}%
\let\iod\yod

\DeclareRobustCommand{\fLow}%
    {{\setbox\z@\hbox{\f}\dimen@\ht\z@
    \advance\dimen@-1ex\raisebox{-\dimen@}{\f}}}
\DeclareRobustCommand{\fHigh}%
    {{\setbox\z@\hbox{\f}\dimen@\dp\z@\raisebox{\dimen@}{\f}}}

\DeclareRobustCommand\qmark{\hskip.16ex{\fontencoding{OT1}\normalshape(?)}}
\DeclareRobustCommand\lpar{{\metricsfont(}}
\DeclareRobustCommand\rpar{{\metricsfont)}}
\DeclareRobustCommand\frapar[1]{\lpar#1\rpar}

\DeclareRobustCommand{\ap}[1]{\/\textsuperscript{#1}}

\newcommand\Dots[1][1]{{\count255=#1\@whilenum\count255>\z@
        \do{\kern.4ex\d{v}\kern.4ex\advance\count255\m@ne}}}
\newcommand\DOTS[1][1]{{\count255=#1\@whilenum\count255>\z@
        \do{\kern.8ex\d{v}\kern.8ex\advance\count255\m@ne}}}
\newcommand\Dashes[1][1]{{\count255=#1\@whilenum\count255>\z@
        \do{\kern.4ex--\kern.4ex\advance\count255\m@ne}}}
\newcommand\DASHES[1][1]{{\count255=#1\@whilenum\count255>\z@
        \do{\kern.8ex--\kern.8ex\advance\count255\m@ne}}}

\DeclareRobustCommand{\:}{\textormath{\tw@dots}{\mskip\medmuskip}}
\DeclareRobustCommand{\;}{\textormath{\thre@dots}{\mskip\thickmuskip}}
\DeclareRobustCommand{\?}{\f@urdots}
\DeclareRobustCommand{\mutpers}{\makebox[1ex]{\:\hfill\:}\space}
\let\MutPers\mutpers\let\antilabe\mutpers
\def\tw@dots{\mbox{\kern1\p@\vbox to1ex{\hbox{.}\vss\hbox{.}}}}
\def\thre@dots{\mbox{\kern1\p@\vbox to 2ex{\hbox{.}\vss
    \hbox{.}\vss\hbox{.}}}}
\def\f@urdots{\mbox{\kern1\p@\vbox to 2ex{\hbox{.}\vss
    \hbox{.}\vss\hbox{.}\vss\hbox{.}}}}

\DeclareRobustCommand{\|}{\relax\ensuremath{\mskip2mu\vert}}
\DeclareRobustCommand{\dBar}{\ensuremath{\vert\vert}}
\DeclareRobustCommand{\tBar}{\ensuremath{\vert\vert\vert}}

\def\negthinspace{\nobreak\hskip-0.07em}
\def\posthinspace{\nobreak\hskip0.07em}
\def\posthindspace{\nobreak\hskip0.14em}
\renewcommand{\,}{\textormath{\posthinspace}{\mskip\thinmuskip}}
\renewcommand{\!}{\textormath{\negthinspace}{\mskip-\thinmuskip}}

\DeclareRobustCommand{\lbrk}{{\metricsfont\posthindspace[\negthinspace}}
\DeclareRobustCommand{\rbrk}{{\metricsfont]}}
\DeclareRobustCommand\lmqi{{\metricsfont!}}
\DeclareRobustCommand\rmqi{{\metricsfont:}}
\DeclareRobustCommand\lmqs{{\metricsfont?}}
\DeclareRobustCommand\rmqs{{\metricsfont;}}
\DeclareRobustCommand\mqi[1]{\posthinspace\lmqi\negthinspace
    {#1\/}\rmqi}\let\mezzeq\mqi
\DeclareRobustCommand\mqs[1]{\lmqs{#1\/}\rmqs}
\DeclareRobustCommand{\Ladd}[1]{%
  \textmtr{<}{\!\!#1\/}\textmtr{>}}%               litterae certe addendae
\providecommand\LLadd{}
\DeclareRobustCommand\LLaddKern[2]%
  {\ifdim\fontdimen1\font=\z@\kern#1\else\kern#2\fi}
\RenewDocumentCommand{\LLadd}{O{0pt} m O{0pt}}{%   litterae certe addendae
  \textmtr{<\kern-0.3ex<}{\LLaddKern{-0.1ex}{-0.3ex}%
  \kern-#1\relax#2\/\LLaddKern{\z@}{0.1ex}\kern-#3}\textmtr{>\kern-0.3ex>}%
}%
\DeclareRobustCommand{\ladd}[1]{{\metricsfont\kern.15ex[\negthinspace}%
    {#1\/}{\metricsfont]\kern-.15ex}}%          litterae addendae
\DeclareRobustCommand{\lladd}[1]{{\metricsfont\kern.15ex[\kern-.3ex[%
    \negthinspace}{#1\/}{\metricsfont]\kern-.3ex]%
    \kern-.15ex}}%                              litterae addendae
\DeclareRobustCommand{\lesp}[1]%
    {\mbox{$\{\kern-.20ex$#1\kern.16ex$\}$}}%   litterae delendae
\let\ldel\lesp

\DeclareTextCommand{\itopenquotes}{\GRenc@name}%
    {{\fontencoding{OT1}\selectfont\char92}}%
\DeclareTextCommand{\itclosedquotes}{\GRenc@name}%
    {{\fontencoding{OT1}\selectfont\char34}}%
\let\itoq\itopenquotes
\let\itcq\itclosedquotes

\newcommand\GEodq{\bgroup\futurelet\@tempA\GE@dq}
\def\GE@dq{{\metricsfont\char18}\ifx\@tempA m\posthinspace\fi\egroup}
\newcommand\GEcdq{{\metricsfont\char16}}
\newcommand\GEdqtext[1]{\GEodq\posthinspace#1\/\posthinspace\GEcdq}
\newcommand\GEoq{\bgroup\futurelet\@tempA\GE@q}
\def\GE@q{{\metricsfont\char13}\ifx\@tempA m\posthinspace\fi\egroup}
\newcommand\GEcq{{\metricsfont\char19}}
\newcommand\GEqtext[1]{\GEoq\posthinspace#1\/\posthinspace\GEcq}
\newcommand\ENodq{{\metricsfont\char16}}
\newcommand\ENcdq{{\metricsfont\char17}}
\newcommand\ENdqtext[1]{\ENodq\negthinspace#1\/\posthinspace\ENcdq}

\DeclareRobustCommand\LitNil{\textbullet}
\let\litnil\LitNil
\DeclareTextCommand{\sva}{\GRenc@name}{%
\rotatebox[origin=c]{180}{\def\@tempA{li}%
\fontencoding{OT1}\ifx\f@shape\@tempA\fontshape{it}\fi\selectfont e}}
\DeclareTextCommand\sva{OT1}{{\expandafter\fontencoding
    \expandafter{\GRenc@name}\selectfont\sva}}
\DeclareTextCommand\sva{T1}{{\expandafter\fontencoding
    \expandafter{\GRenc@name}\selectfont\sva}}
\let\shva\sva\let\shwa\sva

\DeclareRobustCommand\skewstack[2]{{%
\edef\slant@{\strip@pt\fontdimen1\font}%
\setbox\z@\hbox{#1}\dimen@\ht\z@\box\z@
\kern-.045em\setbox\@ne\hbox{\scriptsize#2}%
\ifdim\dimen@>1.2ex\advance\dimen@-\ht\@ne\else
    \dimen@1ex\advance\dimen@-.5\ht\@ne\fi
\kern\slant@\dimen@\raise\dimen@\hbox{\box\@ne}}}

\DeclareRobustCommand\hv{{\fontencoding{OT1}\selectfont
    \skewstack{h}{v}}}
\DeclareRobustCommand\qw{{\fontencoding{OT1}\selectfont
    \skewstack{q}{w}}}
\DeclareRobustCommand\gw{{\fontencoding{OT1}\selectfont
    \skewstack{g}{w}}}
\DeclareRobustCommand\gusv{{\fontencoding{OT1}\selectfont
    \skewstack{g}{\semiv{u}}}}
\DeclareRobustCommand\qusv{{\fontencoding{OT1}\selectfont
    \skewstack{q}{\semiv{u}}}}
\DeclareRobustCommand\qu{{\fontencoding{OT1}\selectfont
    \skewstack{q}{u}}}

\DeclareRobustCommand\dz{{\fontencoding{OT1}\selectfont d\kern-.33ex z}}

\DeclareRobustCommand\Utie[1]{%
\mbox{\vtop{\ialign{##\crcr
   \hfil#1\hfil\crcr
   \noalign{\kern.3ex\nointerlineskip}%
   \hfil$\smile$\hfil\crcr}}}}

\DeclareRobustCommand{\siner}[1]{%
\mbox{\vtop{\ialign{##\crcr
   \hfil#1\hfil\crcr
   \noalign{\kern.6ex\nointerlineskip}%
   \upfill\crcr}}}}
\let\siniz\siner

\def\upfill{$\m@th \scriptstyle\setbox\z@\hbox{$\scriptstyle\bracelu$}%
  \kern.16ex\bracelu\ifPDF\kern-.15ex\fi
  \leaders\vrule \@height\ht\z@ \@depth\z@\hfill
  \braceru\kern.16ex$}

\def\downfill{$\m@th\scriptstyle\setbox\z@\hbox{$\scriptstyle\braceld$}%
  \kern.16ex\braceld\ifPDF\kern-.15ex\fi
  \leaders\vrule \@height\ht\z@ \@depth\z@\hfill
  \bracerd\kern.16ex$}

\newcommand*\zeugma[1]{{\vbox{\setbox\z@\hbox{#1}\dimen@=\ht\z@
      \edef\@slant{\strip@pt\fontdimen1\font}%
      \dimen\tw@=\wd\z@
      \dimen@=\@slant\dimen@\ifmetricsfont\dimen@=\z@
        \advance\dimen\tw@-.5ex\fi
      \kern-.2ex\ialign{##\crcr
      \hbox to\z@{\ifmetricsfont\kern.25ex\fi\kern\dimen@
      \hbox to\dimen\tw@{\hss\downfill\kern.2\dimen@\hss}\hss}\crcr
      \noalign{\ifmetricsfont\kern.6ex
            \else\kern.4ex\fi\nointerlineskip}%
      \hfil{#1}\hfil\crcr}}}%
}

\newcommand*\slzeugma[1]{{\leavevmode
    \setbox\tw@\hbox{\metricsfont\char120}%
    \setbox\z@\hbox{#1}\dimen@.5\wd\z@\advance\dimen@-.5\wd\tw@
    \edef\@slant{\strip@pt\fontdimen1\font}%
    \advance\dimen@\@slant\ht\z@
    \hbox to\z@{\kern\dimen@\box\tw@\hss}\box\z@
    }%
}

\newcommand*\rszeugma[1]{{\leavevmode
    \setbox\tw@\hbox{\metricsfont\char122}%
    \setbox\z@\hbox{#1}\dimen@.5\wd\z@\advance\dimen@-.5\wd\tw@
    \edef\@slant{\strip@pt\fontdimen1\font}%
    \advance\dimen@\@slant\ht\z@
    \hbox to\z@{\kern\dimen@\box\tw@\hss}\box\z@
    }%
}

\newcommand*{\nexus}[1]{{\setbox\tw@\hbox{#1\/}%
        \edef\slant@{\strip@pt\fontdimen1\font}%
        \@tempdima=\slant@\ht\tw@\advance\@tempdima.45ex
        \setbox4\hbox{\resizebox{\wd\tw@}{\height}{$\widehat{\phantom{aaa}}$}}%
        \setbox4\hbox{\smash{\lower1.35ex\hbox{\box4}}}%
        \vbox{\ialign{##\crcr%
        \kern\@tempdima\box4%
        \crcr
        \noalign{\kern.15ex\nointerlineskip}%
        \hfil{#1}\hfil\crcr}}}}
\let\nesso\nexus

\def\C@rule{\vrule\@height.45ex\@depth-.35ex\@width1.5em}
\def\coronis@rule{\hbox to\z@{\hss\C@rule\hss}}
\def\Coronis@rule{\hbox to\z@
    {\hss\hbox to\z@{\hss$\scriptstyle)$\kern-1.5\p@}\C@rule\hss}}
\DeclareRobustCommand\paragr{\raisebox{-1ex}[\z@][\z@]{\coronis@rule}}
\let\coronis\paragr
\DeclareRobustCommand\Coronis{\raisebox{-1ex}[\z@][\z@]{\Coronis@rule}}
\DeclareRobustCommand{\dparagr}%
    {\raisebox{-1.3ex}[\z@][\z@]{\coronis@rule}%
    \raisebox{-1.6ex}[\z@][\z@]{\coronis@rule}}

\DeclareRobustCommand*\sinafia{{\metricsfont s}}
\DeclareRobustCommand*{\crux}{{\metricsfont\char'171}}
\DeclareRobustCommand*{\FinisCarmen}{\ensuremath{\otimes}}
\let\FinCar\FinisCarmen
\DeclareRobustCommand*{\apici}[1]%
    {\posthinspace{\metricsfont\char96}\negthinspace#1%
    \posthinspace{\metricsfont\char39}\negthinspace}
\DeclareRobustCommand*{\apex}%
    {\/\hskip.5ex\vrule\@height1.7ex\@depth-1ex\hskip.2ex}
\let\positio\apex
\DeclareRobustCommand*{\Int}{\ensuremath{\int}}
\let\m@thst@r\star
\DeclareRobustCommand*{\star}{\textormath{{{\normalshape *}}}{\m@thst@r}}
\DeclareRobustCommand*{\dstar}{{\normalshape **}}
\DeclareRobustCommand*{\tstar}{{\normalshape ***}}
\DeclareRobustCommand*{\responsio}{{\boldmath\ensuremath{\sim}}}

\DeclareRobustCommand{\thorn}{{\fontencoding{T1}\selectfont\th}}
\DeclareRobustCommand{\Thorn}{{\fontencoding{T1}\selectfont\TH}}

\DeclareRobustCommand{\dracma}{{\metricsfont D}}
\DeclareRobustCommand{\hemiobelion}{{\metricsfont A}}
\DeclareRobustCommand{\tetartemorion}{{\metricsfont B}}
\DeclareRobustCommand{\stater}{{\metricsfont C}}
\DeclareRobustCommand{\denarius}{{\metricsfont E}}
\DeclareRobustCommand{\etos}{{\metricsfont G}}

\DeclareRobustCommand{\cut}[1]{%
    \ifx#1d\dcutbar\else
        \ifx#1b\bcutbar\else
            \ifx#1g\gcutbar
            \fi
        \fi
    \fi}
\def\dcutbar{{\edef\slant@{\strip@pt\fontdimen1\font}%
    d\dimen@1.2ex\kern\slant@\dimen@
    \llap{\vrule\@height1.3ex\@depth-\dimen@
    \ifdim\slant@\p@>\z@\@width.35em\else\@width.4em\fi\kern.03em}}}
\def\bcutbar{{\edef\slant@{\strip@pt\fontdimen1\font}%
    \rlap{\dimen@1.2ex\kern\slant@\dimen@
    \ifdim\slant@\p@=\z@\kern.03em\fi
    \vrule\@height1.3ex\@depth-\dimen@
    \ifdim\slant@\p@>\z@\@width.3em\else\@width.4em\fi}b}}
\def\gcutbar{{\edef\slant@{\strip@pt\fontdimen1\font}%
    \ifdim\slant@\p@>\z@
        g\kern-.55ex\dimen@.2ex\kern-\slant@\dimen@
        \vrule\@height-.1ex\@depth\dimen@\@width.6ex
    \else
        \dimen@.2ex\kern\slant@\dimen@\vrule\@height.3ex\@depth-\dimen@
        \@width.6ex\kern-.55ex\relax g
    \fi}}

\let\OSN\oldstylenums

\newcommand\splus{\leavevmode{%
    \edef\slant@{\strip@pt\fontdimen1\font}%
    \setbox\z@\hbox{s}%
    \dimen@=\wd\z@
    \setbox\tw@\hbox{$\scriptscriptstyle+$}%
    \advance\dimen@.35\ht\tw@
    \raisebox{\dimen@}[\z@][\z@]{%
        \makebox[\z@][l]{\kern.5\wd\z@
         \kern\slant@\dimen@\kern-.5\wd\tw@\box\tw@}}%
    \box\z@}}%
\newcommand\stimes{\leavevmode{%
    \edef\slant@{\strip@pt\fontdimen1\font}%
    \setbox\z@\hbox{s}%
    \dimen@=\wd\z@
    \setbox\tw@\hbox{$\scriptscriptstyle\times$}%
    \advance\dimen@.2\ht\tw@
    \raisebox{\dimen@}[\z@][\z@]{%
        \makebox[\z@][l]{\kern.5\wd\z@
            \kern\slant@\dimen@\kern-.5\wd\tw@\box\tw@}}%
    \box\z@}}%
\newcommand\kclick{\leavevmode{%
    \edef\slant@{\strip@pt\fontdimen1\font}%
    \setbox\z@\hbox{k}%
    \setbox\tw@\hbox{\fontencoding\GRenc@name\selectfont\s{v}}%
    \dimen@\wd\z@
    \ifdim\slant@\p@=\z@
        \advance\dimen@-.1\wd\z@\else\advance\dimen@\wd\tw@
    \fi
    k\makebox[\z@][r]{\unhcopy\tw@\kern.5\dimen@}%
    }}%

\newcounter{verso}\setcounter{verso}{0}
\newcommand{\smallvert}{\vrule\@height.6ex\@depth.4ex}

\DeclareRobustCommand\verso[1][]{%
    \def\@tempA{#1}\ifx\@tempA\empty
    \else
        \setcounter{verso}{#1}\addtocounter{verso}{\m@ne}%
    \fi
    \refstepcounter{verso}%
    \@killglue\space
    \ensuremath{\mathop{\smallvert}\limits^{\scriptscriptstyle\theverso}}%
    \space\ignorespaces}

\newenvironment{versi}[1]{%
\def\makelabel##1{##1}
\setbox\z@\hbox{#1}%
\list{}{\labelwidth\wd\z@\leftmargin\labelwidth
    \advance\leftmargin\labelsep}%
    \item[\box\z@]
}{%
\endlist
}
\let\versus\versi \let\endversus\endversi
\newif\ifBreakVersi
\BreakVersifalse
\newenvironment{Versi}[1][1]{%
    \setcounter{verso}{#1}%
    \def\writ@verso{%
        \count255=\value{verso}\divide\count255by5\relax
        \multiply\count255by5\relax
        \advance\count255-\value{verso}%
        \ifnum\count255=\z@
          {\fontseries{m}\small
            \expandafter\oldstylenums\expandafter{\the\c@verso}}%
        \else
          \empty
        \fi}%
    \def\acapo{\@ifstar{\v@rscr{\@M}}{\v@rscr{\z@}}}%
    \let\\\acapo
    \def\v@rscr##1{\@ifnextchar[{\wr@teverse{##1}}%
        {\wr@teverse{##1}[\z@]}}%
    \def\wr@teverse##1[##2]{\egroup
        \makebox[3em][r]{%
            \writ@verso\refstepcounter{verso}\kern1.5em}
            \ifBreakVersi
                  \begingroup\raggedright
                  \hyphenpenalty \@M
                  \unhbox\z@\par
                  \endgroup
            \else
                  \rlap{\box\z@}\par
            \fi
        \penalty##1\vskip##2\relax
        \setbox\z@\hbox\bgroup\ignorespaces}%
    \list{}{\itemsep\z@\parsep\z@
    \if@twocolumn
    \itemindent   -5.3em%
    \listparindent\itemindent
      \rightmargin\z@
      \advance\leftmargin 3.3em
    \else
     \itemindent   -1.5em%
    \listparindent\itemindent
     \rightmargin  \leftmargin
      \advance\leftmargin 1.5em
    \fi
    }%
    \item\leavevmode\setbox\z@\hbox\bgroup\ignorespaces
}{%
    \\%
    \egroup
    \endlist
}
\let\Versus\Versi \let\endVersus\endVersi

\newcounter{subverso} \setcounter{subverso}{0}
\newif\ifSubVerso
\newlength{\versoskip}
\newcommand*\NoSubVerso{\global\SubVersofalse
    \global\versoskip1.3em\ignorespaces}
\newcommand*\SubVerso[1][0]{\global\SubVersotrue
    \ifnum#1=0\else
        \setcounter{subverso}{#1}%
        \global\protected@edef\@currentlabel{\the\c@subverso}%
    \fi
    \global\versoskip.3em\ignorespaces}

\newenvironment{VERSI}[1][1]{%
    \setcounter{verso}{#1}%
    \def\writ@verso{%
        \count255=\value{verso}\divide\count255by5\relax
        \multiply\count255by5\relax
        \advance\count255-\value{verso}%
        \ifnum\count255=0\relax
          {\fontseries{m}\small\expandafter\oldstylenums\expandafter{\the\c@verso}}%
        \else
          \empty
        \fi}%
    \NoSubVerso
    \def\writ@subverso{%
        \ifSubVerso
            {\fontseries{m}\scriptsize\expandafter\oldstylenums
                \expandafter{\the\c@subverso}}%
        \fi}%
    \def\\%
        {\@ifstar{\v@rscr{\@M}}{\v@rscr{\z@}}}%
    \def\v@rscr##1{\@ifnextchar[{\writ@verse{##1}}%
        {\writ@verse{##1}[\z@]}}%
    \def\writ@verse##1[##2]{\egroup
        \makebox[1.5em][r]{\writ@verso\refstepcounter{verso}}%
        \makebox[1.5em][r]{\writ@subverso\refstepcounter{subverso}}%
        \kern1.5ex\hskip\versoskip
            \ifBreakVersi
                  \begingroup
                  \hyphenpenalty \@M
                  \unhbox\z@\par
                  \endgroup
            \else
                  \rlap{\box\z@}\par
            \fi
        \penalty##1\vskip##2\relax
        \setbox\z@\hbox\bgroup\ignorespaces}%
    \list{}{\parsep\z@\itemsep\z@
    \if@twocolumn
    \itemindent   -5.3em%
    \listparindent\itemindent
      \rightmargin\z@
      \advance\leftmargin 3.3em
    \else
     \itemindent   -1.5em%
    \listparindent\itemindent
     \rightmargin  \leftmargin
      \advance\leftmargin 1.5em
    \fi
    }%
    \item\leavevmode\setbox\z@\hbox\bgroup\ignorespaces
}{%
    \\%
    \egroup\endlist}
\let\VERSUS\VERSI \let\endVERSUS\endVERSI

\DeclareRobustCommand\longa{{\metricsfont l}}
\DeclareRobustCommand\brevis{\textormath{{{\metricsfont b}}}{\br@ve}}
\DeclareRobustCommand\bbrevis{{\metricsfont c}}
\DeclareRobustCommand\barbrevis{{\metricsfont  i}}
\DeclareRobustCommand\barbbrevis{{\metricsfont j}}
\DeclareRobustCommand\ubarbrevis{{\metricsfont d}}
\DeclareRobustCommand\ubarbbrevis{{\metricsfont e}}
\DeclareRobustCommand\ubarsbrevis{{\metricsfont f}}
\DeclareRobustCommand{\ubrevislonga}{{\metricsfont\char107}}

\DeclareRobustCommand\corona{{\metricsfont\char20}}
\let\ElemInd\corona
\DeclareRobustCommand\coronainv{{\metricsfont\char21}}
\DeclareRobustCommand\catal{{\metricsfont g}}
\DeclareRobustCommand\ipercatal{{\metricsfont h}}
\DeclareRobustCommand\hiatus{\textsuperscript{\normalshape H}}
\DeclareRobustCommand\Hiatus{\makebox[\z@]{\hiatus}}
\DeclareRobustCommand\X{{\metricsfont X}}
\let\anceps\X
\DeclareRobustCommand\banceps{{\metricsfont Y}}
\DeclareRobustCommand\ancepsdbrevis{{\metricsfont Z}}
\DeclareRobustCommand{\aeolicbii}{{\metricsfont I}}
\DeclareRobustCommand{\aeolicbiii}{{\metricsfont J}}
\DeclareRobustCommand{\aeolicbiv}{{\metricsfont K}}

\newif\ifmetricsfont\metricsfontfalse
\def\stripsl@sh#1{\expandafter\@gobble\string#1}
\def\2#1 {\csname2#1\endcsname}
\def\3#1 {\csname3#1\endcsname}
\def\4#1 {\csname4#1\endcsname}

\newcommand\newmetrics[2]{%
    \expandafter\@namedef\expandafter{\stripsl@sh#1}%
        {{\metricsfonttrue#2}}}

\newmetrics\iam{\barbrevis\longa\brevis\longa}
\newmetrics\chor{\longa\brevis\brevis\longa}
\newmetrics\enopl{\brevis\longa\brevis\brevis\longa\brevis\brevis\longa}
\newmetrics{\4MACRO}{\longa\longa\longa\longa}
\newmetrics{\aeolchorsor}{\longa\zeugma{\brevis\brevis}\brevis
    \brevis\zeugma{\brevis\brevis}}
\newmetrics{\hexam}{\longa\brevis\brevis\longa\brevis\brevis
    \longa\brevis\brevis\longa\brevis\brevis\longa\brevis\brevis
    \longa\longa}
\newmetrics{\pentam}{\longa\barbbrevis\longa\barbbrevis\longa\dBar
    \longa\brevis\brevis\longa\brevis\brevis\longa}
\newmetrics{\2tr}{\longa\brevis\longa\X\ \longa\brevis\longa\X\ }

\DeclareRobustCommand*{\metricstack}[2]%
    {$\mathord{\mathop{\hbox{#1\rule{\z@}{1ex}}}%
    \limits^{\scriptscriptstyle\relax#2\relax}}$}

\newcommand*{\svert}{\vrule\@height.8ex\@depth.2ex\relax}
\DeclareRobustCommand*{\textoverline}[1]{%
      \leavevmode\vbox{\setbox\z@\hbox{#1}
      \ialign{##\crcr
      \hbox to\wd\z@{\hrulefill}\crcr
      \noalign{\kern.4ex\nointerlineskip}%
      \hfil\box\z@\hfil\crcr}}}

\newlength{\br@cedmetrics}
\newcommand*{\verseskip}[1]{{%
    \setbox\z@\hbox{\longa}\dimen@\wd\z@\leavevmode\hbox to#1\dimen@{}}}

\newenvironment{bracedmetrics}[1]{\def\Hfill{\leavevmode\hfill}%
\settowidth{\br@cedmetrics}{#1}%
\ifvmode\vskip1ex\fi
$\displaystyle\left.%
\vcenter\bgroup\hsize\br@cedmetrics\parindent\z@\parskip\z@
}{\egroup\right\}$}

\RequirePackage{trace}
\def\GTRON{\global\tracingcommands=\tw@ \global\tracingmacros=\tw@}
\def\GTROF{\global\tracingcommands=\z@ \global\tracingmacros=\z@}
\def\TRON{\tracingcommands=\tw@ \tracingmacros=\tw@}
\def\TROF{\tracingcommands=\z@ \tracingmacros=\z@}


\RenewDocumentCommand\Greeknumeral{s m}{\bgroup%
  \let\textkoppa\textqoppa \let\textKoppa\textQoppa
  \IfBooleanTF{#1}%
    {\let\textstigmagreek\textstigma  \let\textStigmagreek\textStigma}%
    {\let\textstigmagreek\textdigamma \let\textStigmagreek\textDigamma}%
  \bbl@greek@GreekNum\@secondoftwo{#2}\egroup}

\RenewDocumentCommand\greeknumeral{s m}{\bgroup%
  \let\textkoppa\textqoppa \let\textKoppa\textQoppa
  \IfBooleanTF{#1}%
    {\let\textstigmagreek\textstigma  \let\textStigmagreek\textStigma}%
    {\let\textstigmagreek\textdigamma \let\textStigmagreek\textDigamma}%
  \bbl@greek@GreekNum\@firstoftwo{#2}\egroup}

\providecommand\grtoday{}
\RenewDocumentCommand\grtoday{ s }%
{\bgroup\IfBooleanTF{#1}%
{\greeknumeral*{\the\day}\space \gr@polutoniko@month\space
  \greeknumeral*{\the\year}}%
{\greeknumeral{\the\day}\space \gr@polutoniko@month\space
  \greeknumeral{\the\year}}%
\egroup}

\DeclareTextSymbol{\Vmiria}{\GRenc@name}{5}
\DeclareTextSymbol{\Vkilo}{\GRenc@name}{4}
\DeclareTextSymbol{\Vetto}{\GRenc@name}{3}
\DeclareTextSymbol{\Vdeka}{\GRenc@name}{2}
\newcommand*\attic@ill@value[1]{\PackageWarning{teubner}{%
Illegal value (\number#1) for \string\ActicNumeral\space}}
\DeclareRobustCommand*\AtticNumeral[1]{%
\ifnum#1<\@ne \attic@ill@value{#1}\else
  \ifnum#1>99999\relax \attic@ill@value{#1}\else
    \AtticCycl@{#1}%
  \fi
\fi}

\def\AtticCycl@#1{%
  \bgroup
  \countdef\valore=252\countdef\cifra=250\relax
  \valore=#1\relax
  \@whilenum\valore>0\do{%
    \ifnum\valore>9999\relax
      \cifra=\valore\divide\cifra10000\relax
      \valore=\numexpr\valore-\cifra*10000\relax
      \ifnum\cifra>4\relax\Vmiria \advance\cifra-5\relax\fi
         \@whilenum\cifra>\z@\do{M\advance\cifra\m@ne}%
    \else
      \ifnum\valore>999\relax
        \cifra=\valore\divide\cifra1000\relax
        \valore=\numexpr\valore-\cifra*1000\relax
          \ifnum\cifra>4\relax\Vkilo \advance\cifra-5\relax\fi
             \@whilenum\cifra>\z@\do{Q\advance\cifra\m@ne}%
      \else
        \ifnum\valore>99\relax
          \cifra=\valore\divide\cifra100\relax
          \valore=\numexpr\valore-\cifra*100\relax
          \ifnum\cifra>4\relax\Vetto \advance\cifra-5\relax\fi
             \@whilenum\cifra>\z@\do{H\advance\cifra\m@ne}%
        \else
           \ifnum\valore>9\relax
              \cifra=\valore\divide\cifra10\relax
              \valore=\numexpr\valore-\cifra*10\relax
              \ifnum\cifra>4\relax\Vdeka \advance\cifra-5\relax\fi
                 \@whilenum\cifra>\z@\do{D\advance\cifra\m@ne}%
           \else
             \ifnum\valore>0\relax
               \cifra=\valore
               \ifnum\cifra>4\relax P\advance\cifra-5\relax\fi
                  \@whilenum\cifra>\z@\do{I\advance\cifra\m@ne}%
               \valore=\cifra
             \fi
           \fi
        \fi
      \fi
    \fi
  }%
  \egroup}

%%  It may be distributed and/or modified under the
%%  conditions of the LaTeX Project Public License, either version 1.3c
%%  of this license or (at your option) any later version.
%%  The latest version of this license is in
%%     http://www.latex-project.org/lppl.txt
%%
%% End of file `teubner.sty'.
